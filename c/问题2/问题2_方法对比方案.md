# 问题2：Rank vs Percentage 方法对比分析方案

## 1. 问题定义

**核心问题**：比较和对比节目使用的两种合并评审和粉丝投票的方法（排名法 Rank 和百分比法 Percentage）

**规则映射**：
- **Rank（排名法）**：Season 1-2, Season 28-34（共57个案例）
- **Percentage（百分比法）**：Season 3-27（共171个案例）

---

## 2. 方法论框架

### 2.1 核心假设

| 假设 | 说明 |
|------|------|
| **粉丝票来源** | 使用问题1的 `FanVoteReconstructor` 凸优化模型重构 |
| **重构方法** | 基于实际使用的规则（Rank/Percentage）重构粉丝票 |
| **PSM匹配** | Logistic回归 + 1:1最近邻匹配，caliper=0.05 |
| **Judges' Save** | 评委从倒数两名中淘汰**评委分最低者** |

### 2.2 分析方法

#### A. 平行世界实验
- 对228个案例，使用问题1重构的粉丝票分布
- 同时应用 Rank 和 Percentage 两种方法
- 比较淘汰结果的差异

#### B. Logistic-PSM 倾向得分匹配
- **处理变量**：实际使用的规则（Rank=1, Percentage=0）
- **混杂变量**：n_participants, judge_std, judge_mean
- **结果变量**：pct_matches_actual, rank_matches_actual

#### C. 方法偏向性分析
- **定义**：Fan Bias = P(淘汰者 ≠ 评委分最低者 | 方法)
- **统计检验**：McNemar配对检验

#### D. 争议案例反事实模拟
- **Jerry Rice (S2)**：Rank规则下的冠军
- **Bobby Bones (S27)**：Percentage规则下的冠军

---

## 3. 核心发现

### 3.1 平行世界实验结果

| 指标 | 数值 |
|------|------|
| 总案例数 | 228 |
| 两种方法结果相同 | **82.9%** |
| 百分比法匹配实际淘汰 | **100.0%** |
| 排名法匹配实际淘汰 | **82.9%** |

**解读**：
- 100%匹配是因为粉丝票是基于实际规则重构的，约束自然满足
- 17.1%的案例中两种方法产生不同结果

### 3.2 方法偏向性

| 方法 | 偏向粉丝比例 |
|------|-------------|
| Percentage | **61.0%** |
| Rank | **53.1%** |
| 差异 | +7.9% |

**McNemar检验**：χ² = 16.056, p = 0.0001 (***显著)

**结论**：百分比法显著更偏向粉丝投票

### 3.3 Judges' Save 影响

| 场景 | 改变结果的案例数 | 比例 |
|------|-----------------|------|
| Percentage + Save | 87 | 38.2% |
| Rank + Save | 87 | 38.2% |

**解读**：Judges' Save可显著增加评委对最终结果的控制权

### 3.4 PSM分析结果

| 结果变量 | Rank均值 | Percentage均值(匹配后) | 差异 | p-value |
|----------|----------|----------------------|------|---------|
| pct_matches_actual | 1.000 | 1.000 | 0.000 | 1.0000 |
| rank_matches_actual | 0.684 | 0.825 | -0.140 | 0.0838 |

---

## 4. 争议案例分析

### 4.1 Jerry Rice (Season 2)
- **最终名次**：冠军（第1名）
- **实际规则**：Rank
- **评委分趋势**：起伏较大，多次排名中后

### 4.2 Bobby Bones (Season 27)
- **最终名次**：冠军（第1名）
- **实际规则**：Percentage
- **评委分趋势**：整体偏低，多次排名垫底

---

## 5. 核心结论

### 5.1 方法差异

1. **结果一致性**：两种方法在82.9%的案例中产生相同结果
2. **偏向性差异**：百分比法显著更偏向粉丝投票（p<0.001）
3. **敏感度**：17.1%的案例对方法选择敏感

### 5.2 机制解释

| 方法 | 机制 | 特点 |
|------|------|------|
| **Percentage** | $C_i = \frac{J_i}{\sum J} + f_i$ | 分数差距被放大，粉丝票权重更高 |
| **Rank** | $C_i = R_J(i) + R_F(i)$ | 只考虑排名顺序，忽略分数大小 |

### 5.3 政策建议

1. **如果想强调专业性**：使用 Rank 法（更尊重评委判断）
2. **如果想强调观众参与**：使用 Percentage 法（更偏向粉丝）
3. **如果想增加评委控制**：引入 Judges' Save 规则

---

## 6. 输出文件

### 数据文件
- `results/平行世界实验结果.csv`
- `results/方法偏向性分析.csv`
- `results/JudgesSave模拟结果.csv`
- `results/JerryRice反事实分析.csv`
- `results/BobbyBones反事实分析.csv`

### 图表文件
- `figs/问题2_方法对比分析.png`
- `figs/问题2_PSM分析.png`
- `figs/问题2_偏向性分析.png`
- `figs/问题2_争议案例综合分析.png`

---

## 7. 技术说明

### 7.1 粉丝票重构
使用问题1的 `FanVoteReconstructor` 类：
- 凸优化约束：$f_{elim} \leq f_i$ for all survivors
- Hit-and-Run采样：500次采样，5倍稀释

### 7.2 双方法模拟器
`DualMethodSimulator` 类同时计算：
- **Percentage**: `combined = judge_pct + fan_pct`，最小者淘汰
- **Rank**: `combined_rank = judge_rank + fan_rank`，最大者淘汰

### 7.3 统计检验
- **McNemar检验**：配对分类数据的差异检验
- **Mann-Whitney U**：非参数两组比较
